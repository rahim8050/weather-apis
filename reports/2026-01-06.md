# Daily Report — DRF Backend (weather-apis)
**Date:** 2026-01-06 (EAT)

## Done
- Confirmed the integration expectation from the Nextcloud side:
  - Nextcloud admin endpoints now return a consistent success contract (`status`, `ok`, `message`) and preserve error shape.
- Re-validated the handshake direction and security requirements to implement/verify on DRF:
  - HMAC-authenticated token bootstrap (short-lived token mint)
  - Timestamp skew + nonce replay protection expectations
  - Structured error responses suitable for Nextcloud UI display

## In progress
- Tightening the DRF integration spec alignment (canonicalization rules + header naming) so DRF verification matches Nextcloud `TokenSigner` behavior exactly.

## Next
- Implement/verify DRF integration endpoints under `/api/v1/` (as planned):
  - Token mint endpoint (HMAC-authenticated) returning `expires_in`
  - Whoami/health endpoint for “Test connection”
- Add integration tests:
  - Bad signature, stale/future timestamp, replayed nonce, body tamper, rate-limit
- Add per-client throttling + consistent structured errors (`code`, `message`, `details`)
- Run quality gates (per your standards: Ruff/MyPy/Bandit/Pytest) and confirm green.

## Blockers
- None (pending implementation work).

## Links
- Integration contract reference (Nextcloud side): `apps/weather_apis/AGENTS.md` (Admin JSON Contract + settings parameters)
- Planned API base path: `/api/v1/`
- Validation focus: canonical HMAC verification + replay/skew + throttling

